
@{
    ViewBag.Title = "Jobs @ Lahore Garrison University";
}

<div class="page-content">
    <div class="row page-row">
        <div id="jobs-list" class="jobs-wrapper col-md-8 col-sm-7"></div>
    </div>
</div>

<script type="text/javascript">
    debugger;
    $.ajax({
        type: "GET",
        contentType: "application/json; charset=utf-8",
        url: "/FrontEnd/Widgets/GetJobs/",
        data: "{}",
        dataType: "json",
        success: function (data) {
            debugger;
            $.each(data, function (index, item) {
                debugger;
                $('#jobs-list').append(
                    '<div class="panel panel-default page-row">' +
                    '<div class="panel-heading">' +
                    '<h3 class="panel-title"><a href="@Url.Action("JobDetails", "About", new { id = string.Empty })/' + item.Id + '">' + item.Title + '</a>' +
                    '<span class="label label-success pull-right">' + item.hours + '</span></h3>' +
                    '</div>' +
                        '<div class="panel-body">' + item.Description+
                    '</div>' +
                    '<ul class="list-group">' +
                    '<li class="list-group-item"><strong>Department:</strong> ' + item.Department + '</li>' +
                    '<li class="list-group-item"><strong>Location:</strong> ' + item.Location + '</li>' +
                    '<li class="list-group-item"><strong>Salary:</strong> ' + item.MinimumSalary +' - ' + item.MaximumSalary+ '</li>' +
                    '</ul>' +
                    '<div class="panel-footer">' +
                    '<div class="row">' +
                    '<ul class="list-inline col-md-8 col-sm-6 col-xs-6">' +
                    '<li><a href="@Url.Action("JobDetails", "About", new { id = string.Empty })/' + item.Id + '">More details</a></li>' +
                    '</ul>' +
                    '<div class="meta col-md-4 col-sm-6 col-xs-6 text-right">' +
                    '<small>' + GetDayPosted(item.CreatedAt) + '</small>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>');
            });
        },
        error: function(xhr, err) {
            debugger;
            alert("readyState: " + xhr.readyState + "\nstatus: " + xhr.status);
            alert("responseText: " + xhr.responseText);
        }
    });

    function GetDayPosted(date) {
        debugger;
        var today = new Date();
        var dayDiff = Math.ceil((today - date) / (1000 * 60 * 60 * 24));
        return dayDiff;
    }
</script>
