@model IEnumerable<LahoreGarrisonUniversity.Models.Event>

<section class="widget has-divider">
    <h3 class="title">Upcoming Events</h3>
    @foreach (var item in Model)
    {
        <article class="events-item row page-row">
            <div class="date-label-wrapper col-md-3 col-sm-4 col-xs-4">
                <p class="date-label">
                    <span class="month">@item.StartDate.GetValueOrDefault().Month.ToString().Substring(0, 3).ToUpper()</span>
                    <span class="date-number">@item.StartDate.GetValueOrDefault().Day</span>
                </p>
            </div><!--//date-label-wrapper-->
            <div class="details col-md-9 col-sm-8 col-xs-8">
                <h5 class="title">@item.Title</h5>
                <p class="time text-muted">@item.StartDate.GetValueOrDefault().Hour am - @item.StartDate.GetValueOrDefault().Hour + 2 pm<br>@item.Location</p>
            </div><!--//details-->
        </article>
    }
</section>

<script type="text/javascript">
    //debugger;
    $.ajax({
        type: "GET",
        contentType: "application/json; charset=utf-8",
        url: "/FrontEnd/Home/GetEvents/",
        data: "{}",
        dataType: "json",
        success: function (data) {
            debugger;
            $.each(data, function(index, item) {
                //debugger;
                //now you can access properties using dot notation
                $('.event-item').append(
                    '<p class="date-label">' +
                    '<span class="month">' + GetMonth(new Date(parseInt(item.StartDate.substr(6)))) + '</span>' +
                    '<span class="date-number">' + GetDay(new Date(parseInt(item.StartDate.substr(6)))) + '</span>' +
                    '</p><div class="details"><h2 class="title">' + item.Title + '</h2>' +
                    '<p class="time"><i class="fa fa-clock-o"></i>' + (new Date(parseInt(item.StartDate.substr(6)))).getHours() + 'am - '
                    + (new Date(parseInt(item.StartDate.substr(6)))).getHours() + 2 + ' pm </p>' +
                    '<p class="location"><i class="fa fa-map-marker"></i>' + item.Location + '</p>' +
                    '</div>');
            });
        },
        error: function(xhr, err) {
            debugger;
            alert("readyState: " + xhr.readyState + "\nstatus: " + xhr.status);
            alert("responseText: " + xhr.responseText);
        }
    });

    function GetMonth(d) {
        //debugger;
        var month = new Array();
        month[0] = "January";
        month[1] = "February";
        month[2] = "March";
        month[3] = "April";
        month[4] = "May";
        month[5] = "June";
        month[6] = "July";
        month[7] = "August";
        month[8] = "September";
        month[9] = "October";
        month[10] = "November";
        month[11] = "December";
        return month[d.getMonth()];
    }

    function GetDay(d) {
        //debugger;
        var weekday = new Array(7);
        weekday[0] = "Sunday";
        weekday[1] = "Monday";
        weekday[2] = "Tuesday";
        weekday[3] = "Wednesday";
        weekday[4] = "Thursday";
        weekday[5] = "Friday";
        weekday[6] = "Saturday";

        return weekday[d.getDay()];
    }
</script>